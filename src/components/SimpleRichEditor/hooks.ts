import { useCallback, useMemo, useState } from "react";
import type { FontFamilySelectOption } from "mui-tiptap";
import type { EditorState, EmojiCategories, UpdateEditorState } from "./types";

export const useEditorState = (
  autoSave: boolean
): [EditorState, UpdateEditorState] => {
  const [state, setState] = useState<EditorState>({
    showEmojiPicker: false,
    showImageDialog: false,
    showTableDialog: false,
    showLinkDialog: false,
    showSettingsDialog: false,
    showExportDialog: false,
    imageUrl: "",
    imageCaption: "",
    selectedImageFile: null,
    imageInputMode: "url",
    fontSize: "16",
    tableBorders: true,
    tableRows: 3,
    tableCols: 3,
    tableBorderColor: "#e0e0e0",
    tableBorderWidth: "2",
    tableBorderStyle: "solid",
    rowHighlightColor: "rgba(25, 118, 210, 0.08)",
    columnHighlightColor: "rgba(25, 118, 210, 0.08)",
    emojiCategory: "smileys",
    emojiSearch: "",
    isFullscreen: false,
    isPreviewMode: false,
    autoSaveEnabled: autoSave,
    wordCount: 0,
    characterCount: 0,
    lastSaved: null,
    notification: "",
    showNotification: false,
  });

  const updateState = useCallback<UpdateEditorState>((updates) => {
    setState((prev) => ({ ...prev, ...updates }));
  }, []);

  return [state, updateState];
};

export const useEmojiLibrary = (): EmojiCategories =>
  useMemo(
    () => ({
      smileys: [
        "ðŸ˜€",
        "ðŸ˜ƒ",
        "ðŸ˜„",
        "ðŸ˜",
        "ðŸ˜†",
        "ðŸ˜…",
        "ðŸ˜‚",
        "ðŸ¤£",
        "ðŸ˜Š",
        "ðŸ˜‡",
        "ðŸ™‚",
        "ðŸ™ƒ",
        "ðŸ˜‰",
        "ðŸ˜Œ",
        "ðŸ˜",
        "ðŸ¥°",
        "ðŸ˜˜",
        "ðŸ˜—",
        "ðŸ˜™",
        "ðŸ˜š",
        "ðŸ¤”",
        "ðŸ¤¨",
        "ðŸ˜",
        "ðŸ˜‘",
        "ðŸ˜¶",
        "ðŸ™„",
        "ðŸ˜",
        "ðŸ˜£",
        "ðŸ˜¥",
        "ðŸ˜®",
        "ðŸ¤",
        "ðŸ˜¯",
        "ðŸ˜ª",
        "ðŸ˜«",
        "ðŸ¥±",
        "ðŸ˜´",
        "ðŸ˜›",
        "ðŸ˜œ",
        "ðŸ˜",
        "ðŸ¤¤",
      ],
      gestures: [
        "ðŸ‘",
        "ðŸ‘Ž",
        "ðŸ‘Œ",
        "âœ‹",
        "ðŸ¤š",
        "ðŸ–ï¸",
        "âœŠ",
        "ðŸ‘Š",
        "ðŸ¤›",
        "ðŸ¤œ",
        "ðŸ‘",
        "ðŸ™Œ",
        "ðŸ‘",
        "ðŸ¤²",
        "ðŸ¤",
        "ðŸ™",
        "âœï¸",
        "ðŸ’ª",
        "ðŸ¦¾",
        "ðŸ¦¿",
        "ðŸ‘‹",
        "ðŸ¤Ÿ",
        "âœŒï¸",
        "ðŸ¤ž",
        "ðŸ¤˜",
        "ðŸ¤™",
        "ðŸ‘ˆ",
        "ðŸ‘‰",
        "ðŸ‘†",
        "ðŸ‘‡",
        "â˜ï¸",
      ],
      hearts: [
        "â¤ï¸",
        "ðŸ§¡",
        "ðŸ’›",
        "ðŸ’š",
        "ðŸ’™",
        "ðŸ’œ",
        "ðŸ–¤",
        "ðŸ¤",
        "ðŸ¤Ž",
        "ðŸ’”",
        "â£ï¸",
        "ðŸ’•",
        "ðŸ’ž",
        "ðŸ’“",
        "ðŸ’—",
        "ðŸ’–",
        "ðŸ’˜",
        "ðŸ’",
        "ðŸ’Ÿ",
        "â™¥ï¸",
        "ðŸ’Œ",
        "ðŸ’‹",
        "ðŸ’¯",
        "ðŸ’¢",
        "ðŸ’¥",
        "ðŸ’«",
        "ðŸ’¦",
        "ðŸ’¨",
      ],
      animals: [
        "ðŸ¶",
        "ðŸ±",
        "ðŸ­",
        "ðŸ¹",
        "ðŸ°",
        "ðŸ¦Š",
        "ðŸ»",
        "ðŸ¼",
        "ðŸ¨",
        "ðŸ¯",
        "ðŸ¦",
        "ðŸ®",
        "ðŸ·",
        "ðŸ½",
        "ðŸ¸",
        "ðŸµ",
        "ðŸ™ˆ",
        "ðŸ™‰",
        "ðŸ™Š",
        "ðŸ’",
        "ðŸ”",
        "ðŸ§",
        "ðŸ¦",
        "ðŸ¤",
        "ðŸ£",
        "ðŸ¥",
        "ðŸ¦†",
        "ðŸ¦…",
        "ðŸ¦‰",
        "ðŸ¦‡",
      ],
      food: [
        "ðŸŽ",
        "ðŸ",
        "ðŸŠ",
        "ðŸ‹",
        "ðŸŒ",
        "ðŸ‰",
        "ðŸ‡",
        "ðŸ“",
        "ðŸ«",
        "ðŸˆ",
        "ðŸ’",
        "ðŸ‘",
        "ðŸ¥­",
        "ðŸ",
        "ðŸ¥¥",
        "ðŸ¥",
        "ðŸ…",
        "ðŸ†",
        "ðŸ¥‘",
        "ðŸ¥¦",
        "ðŸ¥¬",
        "ðŸ¥’",
        "ðŸŒ¶ï¸",
        "ðŸ«‘",
        "ðŸŒ½",
        "ðŸ¥•",
        "ðŸ«’",
        "ðŸ§„",
        "ðŸ§…",
        "ðŸ¥”",
      ],
      activities: [
        "âš½",
        "ðŸ€",
        "ðŸˆ",
        "âš¾",
        "ðŸ¥Ž",
        "ðŸŽ¾",
        "ðŸ",
        "ðŸ‰",
        "ðŸ¥",
        "ðŸŽ±",
        "ðŸª€",
        "ðŸ“",
        "ðŸ¸",
        "ðŸ’",
        "ðŸ‘",
        "ðŸ¥",
        "ðŸ",
        "ðŸªƒ",
        "ðŸ¥…",
        "â›³",
        "ðŸª",
        "ðŸ¹",
        "ðŸŽ£",
        "ðŸ¤¿",
        "ðŸ¥Š",
        "ðŸ¥‹",
        "ðŸŽ½",
        "ðŸ›¹",
        "ðŸ›·",
      ],
      objects: [
        "âŒš",
        "ðŸ“±",
        "ðŸ“²",
        "ðŸ’»",
        "âŒ¨ï¸",
        "ðŸ–¥ï¸",
        "ðŸ–¨ï¸",
        "ðŸ–±ï¸",
        "ðŸ–²ï¸",
        "ðŸ•¹ï¸",
        "ðŸ—œï¸",
        "ðŸ’½",
        "ðŸ’¾",
        "ðŸ’¿",
        "ðŸ“€",
        "ðŸ“¼",
        "ðŸ“·",
        "ðŸ“¸",
        "ðŸ“¹",
        "ðŸŽ¥",
        "ðŸ“½ï¸",
        "ðŸŽžï¸",
        "ðŸ“ž",
        "â˜Žï¸",
        "ðŸ“Ÿ",
        "ðŸ“ ",
      ],
      travel: [
        "ðŸš—",
        "ðŸš•",
        "ðŸš™",
        "ðŸšŒ",
        "ðŸšŽ",
        "ðŸŽï¸",
        "ðŸš“",
        "ðŸš‘",
        "ðŸš’",
        "ðŸš",
        "ðŸ›»",
        "ðŸšš",
        "ðŸš›",
        "ðŸšœ",
        "ðŸï¸",
        "ðŸ›µ",
        "ðŸš²",
        "ðŸ›´",
        "ðŸ›¹",
        "ðŸ›¼",
        "ðŸš",
        "ðŸ›¸",
        "âœˆï¸",
        "ðŸ›«",
        "ðŸ›¬",
        "ðŸª‚",
        "â›µ",
      ],
      symbols: [
        "â¤ï¸",
        "ðŸ’™",
        "ðŸ’š",
        "ðŸ’›",
        "ðŸ§¡",
        "ðŸ’œ",
        "ðŸ–¤",
        "ðŸ¤",
        "ðŸ¤Ž",
        "ðŸ’”",
        "â£ï¸",
        "ðŸ’•",
        "ðŸ’ž",
        "ðŸ’“",
        "ðŸ’—",
        "ðŸ’–",
        "ðŸ’˜",
        "ðŸ’",
        "ðŸ’Ÿ",
        "â˜®ï¸",
        "âœï¸",
        "â˜ªï¸",
        "ðŸ•‰ï¸",
        "â˜¸ï¸",
        "âœ¡ï¸",
        "ðŸ”¯",
      ],
    }),
    []
  );

export const useFilteredEmojis = (
  categories: EmojiCategories,
  activeCategory: string,
  search: string
): readonly string[] =>
  useMemo(() => {
    const categoryEmojis = categories[activeCategory] || [];
    return categoryEmojis.filter(
      (emoji) => search.trim() === "" || emoji.includes(search)
    );
  }, [categories, activeCategory, search]);

export const useFontFamilyOptions = (): FontFamilySelectOption[] =>
  useMemo<FontFamilySelectOption[]>(
    () => [
      { label: "Arial", value: "Arial, sans-serif" },
      { label: "Georgia", value: "Georgia, serif" },
      { label: "Times New Roman", value: '"Times New Roman", serif' },
      { label: "Helvetica", value: "Helvetica, sans-serif" },
      { label: "Verdana", value: "Verdana, sans-serif" },
      { label: "Courier New", value: '"Courier New", monospace' },
      { label: "Impact", value: "Impact, sans-serif" },
      { label: "Comic Sans MS", value: '"Comic Sans MS", cursive' },
      { label: "Palatino", value: "Palatino, serif" },
      { label: "Garamond", value: "Garamond, serif" },
      { label: "Trebuchet MS", value: '"Trebuchet MS", sans-serif' },
      { label: "Roboto", value: "Roboto, sans-serif" },
      { label: "Open Sans", value: '"Open Sans", sans-serif' },
      { label: "Lato", value: "Lato, sans-serif" },
      { label: "Montserrat", value: "Montserrat, sans-serif" },
    ],
    []
  );

export const useFontSizeOptions = (): string[] =>
  useMemo<string[]>(
    () => [
      "8",
      "9",
      "10",
      "11",
      "12",
      "14",
      "16",
      "18",
      "20",
      "22",
      "24",
      "28",
      "32",
      "36",
      "42",
      "48",
      "56",
      "64",
      "72",
      "84",
      "96",
    ],
    []
  );
